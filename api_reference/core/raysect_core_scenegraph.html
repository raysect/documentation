

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.3. Scenegraph Module &mdash; Raysect Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/RaysectLogo_web.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.4. Spatial Acceleration" href="spatial_acceleration.html" />
    <link rel="prev" title="1.2.6. Unit Conversions" href="units.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Raysect
          

          
            
            <img src="../../_static/RaysectLogo_web.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">2. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">3. Downloading and Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_it_works.html">4. How it works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart_guide.html">5. Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../observers.html">6. Sampling and Observers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../primitives.html">7. Primitives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../materials.html">8. Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conventions.html">9. Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">10. References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">11. Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Demonstrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../demonstrations/demonstrations.html">1. Core Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../demonstrations/demonstrations.html#materials">2. Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../demonstrations/demonstrations.html#observers">3. Observers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../demonstrations/demonstrations.html#optics">4. Optics</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="core.html">1. Raysect Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core_classes.html">1.1. Core Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">1.2. Math Module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.3. Scenegraph Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="spatial_acceleration.html">1.4. Spatial Acceleration</a></li>
<li class="toctree-l2"><a class="reference internal" href="render_engines.html">1.5. Render Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">1.6. Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../primitives/primitives.html">2. Primitives Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optical/optical.html">3. Optical Module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Raysect</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="core.html">1. Raysect Core</a> &raquo;</li>
        
      <li>1.3. Scenegraph Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/api_reference/core/raysect_core_scenegraph.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scenegraph-module">
<h1>1.3. Scenegraph Module<a class="headerlink" href="#scenegraph-module" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="raysect.core.scenegraph.node.Node">
<em class="property">class </em><code class="sig-prename descclassname">raysect.core.scenegraph.node.</code><code class="sig-name descname">Node</code><a class="headerlink" href="#raysect.core.scenegraph.node.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>The scene-graph node class.</p>
<p>The basic constituent of a scene-graph tree. Nodes can be linked together
by parenting one Node to another to form a tree structure. Each node in a
scene-graph represents a distinct co-ordinate system. An affine transform
associated with each node describes the relationship between a node and its
parent’s coordinate system. By combining the transforms (and inverse
transforms) along the path between two nodes in the tree, the direct
transform between any two arbitrary nodes, and thus their co-ordinate
systems, can be calculated. Using this transform it is then possible to
transform vectors and points between the two co-ordinate systems.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (<a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node"><em>Node</em></a>) – Assigns the Node’s parent to the specified scene-graph object.</p></li>
<li><p><strong>transform</strong> (<a class="reference internal" href="affinematrix.html#raysect.core.math.affinematrix.AffineMatrix3D" title="raysect.core.math.affinematrix.AffineMatrix3D"><em>AffineMatrix3D</em></a>) – Sets the affine transform associated with the Node.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – A string defining the node name.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>children</strong> (<em>list</em>) – A list of child nodes for which this node is the parent.</p></li>
<li><p><strong>meta</strong> (<em>dict</em>) – A dictionary for the storage of any extra user specified meta data.</p></li>
<li><p><strong>root</strong> (<a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node"><em>Node</em></a>) – A reference to the root node of this node’s scene-graph
(i.e. the parent of all parents.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="raysect.core.scenegraph.node.Node.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#raysect.core.scenegraph.node.Node.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of this node.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="raysect.core.scenegraph.node.Node.parent">
<code class="sig-name descname">parent</code><a class="headerlink" href="#raysect.core.scenegraph.node.Node.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent of this node in the scenegraph.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node">Node</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.node.Node.to">
<code class="sig-name descname">to</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.node.Node.to" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an affine transform that, when applied to a vector or point,
transforms the vector or point from the co-ordinate space of the calling
node to the co-ordinate space of the target node.</p>
<p>For example, if space B is translated +100 in x compared to space A and
A.to(B) is called then the matrix returned would represent a translation
of -100 in x. Applied to point (0,0,0) in A, this would produce the
point (-100,0,0) in B as B is translated +100 in x compared to A.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<em>_NodeBase</em>) – The target node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An AffineMatrix3D describing the coordinate transform.</p>
</dd>
<dt class="field-odd">Rtyoe</dt>
<dd class="field-odd"><p>AffineMatrix3D</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.node.Node.to_local">
<code class="sig-name descname">to_local</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.node.Node.to_local" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an affine transform from world space into this nodes local
coordinate space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="affinematrix.html#raysect.core.math.affinematrix.AffineMatrix3D" title="raysect.core.math.affinematrix.AffineMatrix3D">AffineMatrix3D</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.node.Node.to_root">
<code class="sig-name descname">to_root</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.node.Node.to_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an affine transform from local space into the parent node’s
coordinate space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="affinematrix.html#raysect.core.math.affinematrix.AffineMatrix3D" title="raysect.core.math.affinematrix.AffineMatrix3D">AffineMatrix3D</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="raysect.core.scenegraph.node.Node.transform">
<code class="sig-name descname">transform</code><a class="headerlink" href="#raysect.core.scenegraph.node.Node.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>The transform for this node’s coordinate system in relation to the parent node.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="affinematrix.html#raysect.core.math.affinematrix.AffineMatrix3D" title="raysect.core.math.affinematrix.AffineMatrix3D">AffineMatrix3D</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-raysect.core.scenegraph.observer"></span><dl class="class">
<dt id="raysect.core.scenegraph.observer.Observer">
<em class="property">class </em><code class="sig-prename descclassname">raysect.core.scenegraph.observer.</code><code class="sig-name descname">Observer</code><a class="headerlink" href="#raysect.core.scenegraph.observer.Observer" title="Permalink to this definition">¶</a></dt>
<dd><p>A scene-graph class for observing the world.</p>
<p>An observer class is intended to launch rays and sample the world. This is a base class and the observe function
must be implemented by a deriving class. This object is the fundamental abstraction for items such as cameras,
fibre optics and other sampling objects.</p>
<dl class="method">
<dt id="raysect.core.scenegraph.observer.Observer.observe">
<code class="sig-name descname">observe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.observer.Observer.observe" title="Permalink to this definition">¶</a></dt>
<dd><p>Virtual method - to be implemented by derived classes.</p>
<p>Triggers the exploration of the scene by emitting rays according to
the model defined by the derived class implementing the method.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-raysect.core.scenegraph.primitive"></span><dl class="class">
<dt id="raysect.core.scenegraph.primitive.Primitive">
<em class="property">class </em><code class="sig-prename descclassname">raysect.core.scenegraph.primitive.</code><code class="sig-name descname">Primitive</code><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">raysect.core.scenegraph.node.Node</span></code></a></p>
<p>A scene-graph object representing a ray-intersectable surface/volume.</p>
<p>A primitive class defines an open surface or closed surface (volume) that can be intersected by a ray. For example,
this could be a geometric primitive such as a sphere, or more complicated surface such as a polyhedral mesh. The
primitive class is the only class in the scene-graph with which a ray can interact.</p>
<p>This is a base class, its functionality must be implemented fully by the deriving class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (<a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node"><em>Node</em></a>) – Assigns the Node’s parent to the specified scene-graph object.</p></li>
<li><p><strong>transform</strong> (<a class="reference internal" href="affinematrix.html#raysect.core.math.affinematrix.AffineMatrix3D" title="raysect.core.math.affinematrix.AffineMatrix3D"><em>AffineMatrix3D</em></a>) – Sets the affine transform associated with the Node.</p></li>
<li><p><strong>material</strong> (<a class="reference internal" href="../optical/optical_material_base_classes.html#raysect.optical.material.material.Material" title="raysect.optical.material.material.Material"><em>Material</em></a>) – An object representing the material properties of the primitive.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – A string defining the node name.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.bounding_box">
<code class="sig-name descname">bounding_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Virtual method - to be implemented by derived classes.</p>
<p>When the primitive is connected to a scene-graph containing a World
object at its root, this method should return a bounding box that
fully encloses the primitive’s surface (plus a small margin to
avoid numerical accuracy problems). The bounding box must be defined in
the world’s coordinate space.</p>
<p>If this method is called when the primitive is not connected to a
scene-graph with a World object at its root, it must throw a TypeError
exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A world space BoundingBox3D object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="spatial_acceleration.html#raysect.core.boundingbox.BoundingBox3D" title="raysect.core.boundingbox.BoundingBox3D">BoundingBox3D</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.bounding_sphere">
<code class="sig-name descname">bounding_sphere</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.bounding_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>When the primitive is connected to a scene-graph containing a World
object at its root, this method should return a bounding sphere that
fully encloses the primitive’s surface (plus a small margin to
avoid numerical accuracy problems). The bounding sphere must be
defined in the world’s coordinate space.</p>
<p>If this method is called when the primitive is not connected to a
scene-graph with a World object at its root, it must throw a TypeError
exception.</p>
<p>The default implementation is to wrap the the primitive’s bounding box
with a sphere. If the bounding sphere can be more optimally calculated
for the primitive, it should override this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A world space BoundingSphere3D object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="spatial_acceleration.html#raysect.core.boundingsphere.BoundingSphere3D" title="raysect.core.boundingsphere.BoundingSphere3D">BoundingSphere3D</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.contains">
<code class="sig-name descname">contains</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.contains" title="Permalink to this definition">¶</a></dt>
<dd><p>Virtual method - to be implemented by derived classes.</p>
<p>Must returns True if the Point3D lies within the boundary of the surface
defined by the Primitive. False is returned otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>p</strong> (<a class="reference internal" href="points_and_vectors.html#raysect.core.math.point.Point3D" title="raysect.core.math.point.Point3D"><em>Point3D</em></a>) – The Point3D to test.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the Point3D is enclosed by the primitive surface, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.hit">
<code class="sig-name descname">hit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.hit" title="Permalink to this definition">¶</a></dt>
<dd><p>Virtual method - to be implemented by derived classes.</p>
<p>Calculates the closest intersection of the Ray with the Primitive
surface, if such an intersection exists.</p>
<p>If a hit occurs an Intersection object must be returned, otherwise None
is returned. The intersection object holds the details of the
intersection including the point of intersection, surface normal and
the objects involved in the intersection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ray</strong> (<a class="reference internal" href="core_classes.html#raysect.core.ray.Ray" title="raysect.core.ray.Ray"><em>Ray</em></a>) – The ray to test for intersection.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An Intersection object or None if no intersection occurs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="core_classes.html#raysect.core.intersection.Intersection" title="raysect.core.intersection.Intersection">Intersection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.instance">
<code class="sig-name descname">instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new instance of the primitive with the same geometry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (<a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node"><em>Node</em></a>) – Assigns the Node’s parent to the specified scene-graph object.</p></li>
<li><p><strong>transform</strong> (<a class="reference internal" href="affinematrix.html#raysect.core.math.affinematrix.AffineMatrix3D" title="raysect.core.math.affinematrix.AffineMatrix3D"><em>AffineMatrix3D</em></a>) – Sets the affine transform associated with the Node.</p></li>
<li><p><strong>material</strong> (<a class="reference internal" href="../optical/optical_material_base_classes.html#raysect.optical.material.material.Material" title="raysect.optical.material.material.Material"><em>Material</em></a>) – An object representing the material properties of the primitive.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – A string defining the node name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="raysect.core.scenegraph.primitive.Primitive.material">
<code class="sig-name descname">material</code><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.material" title="Permalink to this definition">¶</a></dt>
<dd><p>The material class for this primitive.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../optical/optical_material_base_classes.html#raysect.optical.material.material.Material" title="raysect.optical.material.material.Material">Material</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.next_intersection">
<code class="sig-name descname">next_intersection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.next_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Virtual method - to be implemented by derived classes.</p>
<p>Returns the next intersection of the ray with the primitive along the
ray path.</p>
<p>This method may only be called following a call to hit(). If the ray
has further intersections with the primitive, these may be obtained by
repeatedly calling the next_intersection() method. Each call to
next_intersection() will return the next ray-primitive intersection
along the ray’s path. If no further intersections are found or
intersections lie outside the ray parameters then next_intersection()
will return None.</p>
<p>If any geometric elements of the primitive, ray and/or scene-graph are
altered between a call to hit() and calls to next_intersection() the
data returned by next_intersection() may be invalid. Primitives may
cache data to accelerate next_intersection() calls which will be
invalidated by geometric alterations to the scene. If the scene is
altered the data returned by next_intersection() is undefined.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="core_classes.html#raysect.core.intersection.Intersection" title="raysect.core.intersection.Intersection">Intersection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.notify_geometry_change">
<code class="sig-name descname">notify_geometry_change</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.notify_geometry_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Notifies the scene-graph root of a change to the primitive’s geometry.</p>
<p>This method must be called by primitives when their geometry changes.
The notification informs the root node that any caching structures used
to accelerate ray-tracing calculations are now potentially invalid and
must be recalculated, taking the new geometry into account.</p>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.primitive.Primitive.notify_material_change">
<code class="sig-name descname">notify_material_change</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.primitive.Primitive.notify_material_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Notifies the scene-graph root of a change to the primitive’s material.</p>
<p>This method must be called by primitives when their material changes.
The notification informs the root node that any caching structures used
to accelerate ray-tracing calculations are now potentially invalid and
must be recalculated, taking the new material into account.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-raysect.core.scenegraph.world"></span><dl class="class">
<dt id="raysect.core.scenegraph.world.World">
<em class="property">class </em><code class="sig-prename descclassname">raysect.core.scenegraph.world.</code><code class="sig-name descname">World</code><a class="headerlink" href="#raysect.core.scenegraph.world.World" title="Permalink to this definition">¶</a></dt>
<dd><p>The root node of the scene-graph.</p>
<p>The world node tracks all primitives and observers in the world. It maintains acceleration structures to speed up
the ray-tracing calculations. The particular acceleration algorithm used is selectable. The default acceleration
structure is a kd-tree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – A string defining the node name.</p>
</dd>
</dl>
<dl class="attribute">
<dt id="raysect.core.scenegraph.world.World.accelerator">
<code class="sig-name descname">accelerator</code><a class="headerlink" href="#raysect.core.scenegraph.world.World.accelerator" title="Permalink to this definition">¶</a></dt>
<dd><p>The acceleration structure used for this world’s scene-graph.</p>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.world.World.build_accelerator">
<code class="sig-name descname">build_accelerator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.world.World.build_accelerator" title="Permalink to this definition">¶</a></dt>
<dd><p>This method manually triggers a rebuild of the Acceleration object.</p>
<p>If the Acceleration object is already in a consistent state this method
will do nothing unless the force keyword option is set to True.</p>
<p>The Acceleration object is used to accelerate hit() and contains()
calculations, typically using a spatial sub-division method. If changes are
made to the scene-graph structure, transforms or to a primitive’s
geometry the acceleration structures may no longer represent the
geometry of the scene and hence must be rebuilt. This process is
usually performed automatically as part of the first call to hit() or
contains() following a change in the scene-graph. As calculating these
structures can take some time, this method provides the option of
triggering a rebuild outside of hit() and contains() in case the user wants
to be able to perform a benchmark without including the overhead of the
Acceleration object rebuild.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>force</strong> (<em>bool</em>) – If set to True, forces rebuilding of acceleration structure.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.world.World.contains">
<code class="sig-name descname">contains</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.world.World.contains" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of Primitives that contain the specified point within
their surface.</p>
<p>An empty list is returned if no Primitives contain the Point3D.</p>
<p>This method automatically rebuilds the Acceleration object that is used
to optimise the contains calculation - if a Primitive’s geometry or a
transform affecting a primitive has changed since the last call to hit()
or contains(), the Acceleration structure used to optimise the contains
calculation is rebuilt to represent the new scene-graph state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>point</strong> (<a class="reference internal" href="points_and_vectors.html#raysect.core.math.point.Point3D" title="raysect.core.math.point.Point3D"><em>Point3D</em></a>) – The point to test.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list containing all Primitives that enclose the Point3D.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.world.World.hit">
<code class="sig-name descname">hit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.world.World.hit" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the closest intersection of the Ray with the Primitives in
the scene-graph, if such an intersection exists.</p>
<p>If a hit occurs an Intersection object is returned which contains the
mathematical details of the intersection. None is returned if the ray
does not intersect any primitive.</p>
<p>This method automatically rebuilds the Acceleration object that is used
to optimise hit calculations - if a Primitive’s geometry or a transform
affecting a primitive has changed since the last call to hit() or
contains(), the Acceleration structure used to optimise hit calculations
is rebuilt to represent the new scene-graph state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ray</strong> (<a class="reference internal" href="core_classes.html#raysect.core.ray.Ray" title="raysect.core.ray.Ray"><em>Ray</em></a>) – The ray to test.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An Intersection object or None if no intersection occurs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="core_classes.html#raysect.core.intersection.Intersection" title="raysect.core.intersection.Intersection">Intersection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="raysect.core.scenegraph.world.World.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#raysect.core.scenegraph.world.World.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name for this world node.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="raysect.core.scenegraph.world.World.observers">
<code class="sig-name descname">observers</code><a class="headerlink" href="#raysect.core.scenegraph.world.World.observers" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of observers in this scene-graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="raysect.core.scenegraph.world.World.primitives">
<code class="sig-name descname">primitives</code><a class="headerlink" href="#raysect.core.scenegraph.world.World.primitives" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of primitives maintained in this scene-graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="raysect.core.scenegraph.world.World.to">
<code class="sig-name descname">to</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.world.World.to" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an affine transform that, when applied to a vector or point,
transforms the vector or point from the co-ordinate space of the calling
node to the co-ordinate space of the target node.</p>
<p>For example, if space B is translated +100 in x compared to space A and
A.to(B) is called then the matrix returned would represent a translation
of -100 in x. Applied to point (0,0,0) in A, this would produce the
point (-100,0,0) in B as B is translated +100 in x compared to A.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node"><em>Node</em></a>) – The target node.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An AffineMatrix3D describing the coordinate transform.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="affinematrix.html#raysect.core.math.affinematrix.AffineMatrix3D" title="raysect.core.math.affinematrix.AffineMatrix3D">AffineMatrix3D</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="raysect.core.scenegraph.utility.print_scenegraph">
<code class="sig-prename descclassname">raysect.core.scenegraph.utility.</code><code class="sig-name descname">print_scenegraph</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#raysect.core.scenegraph.utility.print_scenegraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty-prints a scene-graph.</p>
<p>This function will print the scene-graph that contains the specified node.
The specified node will be highlighted in the tree by post-fixing the node
with the string: “[referring node]”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="#raysect.core.scenegraph.node.Node" title="raysect.core.scenegraph.node.Node"><em>Node</em></a>) – The target node.</p>
</dd>
</dl>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">raysect.core</span> <span class="kn">import</span> <span class="n">Point3D</span><span class="p">,</span> <span class="n">translate</span><span class="p">,</span> <span class="n">print_scenegraph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">raysect.primitive</span> <span class="kn">import</span> <span class="n">Cylinder</span><span class="p">,</span> <span class="n">Sphere</span><span class="p">,</span> <span class="n">Box</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">raysect.optical</span> <span class="kn">import</span> <span class="n">World</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">world</span> <span class="o">=</span> <span class="n">World</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cyl_x</span> <span class="o">=</span> <span class="n">Cylinder</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">4.2</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">translate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.1</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="n">world</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">world</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="n">Point3D</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">),</span> <span class="n">Point3D</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="n">world</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_scenegraph</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span>
<span class="go">&lt;World at 0x7f11eee98e08&gt;</span>
<span class="go"> |</span>
<span class="go"> |_ &lt;Cylinder at 0x7f11e40c9588&gt;</span>
<span class="go"> |</span>
<span class="go"> |_ &lt;Sphere at 0x7f11ec063678&gt; [referring node]</span>
<span class="go"> |</span>
<span class="go"> |_ &lt;Box at 0x7f11e40c9648&gt;</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spatial_acceleration.html" class="btn btn-neutral float-right" title="1.4. Spatial Acceleration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="units.html" class="btn btn-neutral float-left" title="1.2.6. Unit Conversions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2018, Dr Alex Meakins

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>