

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. How it works &mdash; Raysect Documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/RaysectLogo_web.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme.css" type="text/css" />
  

  
    <link rel="top" title="Raysect Documentation" href="index.html"/>
        <link rel="next" title="4. Quickstart Guide" href="quickstart_guide.html"/>
        <link rel="prev" title="2. Downloading and Installation" href="installation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Raysect
          

          
            
            <img src="_static/RaysectLogo_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Downloading and Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. How it works</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-ray-tracer">3.1. What is a ray tracer?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-concepts">3.2. Key Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rays">3.2.1. Rays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#observers">3.2.2. Observers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#primitives">3.2.3. Primitives</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scene-graph">3.2.4. Scene-graph</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#process-of-raytracing">3.3. Process of raytracing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart_guide.html">4. Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="primitives.html">5. Primitives</a></li>
<li class="toctree-l1"><a class="reference internal" href="materials.html">6. Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="observers.html">7. Sampling and Observers</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">8. Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">9. References</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">10. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">11. Need Help?</a></li>
</ul>
<p class="caption"><span class="caption-text">Demonstrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demonstrations/demonstrations.html">1. Core Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="demonstrations/demonstrations.html#examples-gallery">2. Examples Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_reference/core/core.html">1. Raysect Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/primitives/primitives.html">2. Primitives Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_reference/optical/optical.html">3. Optical Module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Raysect</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. How it works</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/how_it_works.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-it-works">
<h1>3. How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-a-ray-tracer">
<h2>3.1. What is a ray tracer?<a class="headerlink" href="#what-is-a-ray-tracer" title="Permalink to this headline">¶</a></h2>
<p>An algorithm for simulating light propogation, light is modelled as a bundle of rays
that travel through a scene. The paths of the rays follow a straight line unless
they interact with objects in the scene. As rays interact with materials, their
contribution to the emission is added/subtracted from the ray. A wide variety of
optical interactions can be simulated such as reflection and refraction, scattering,
and dispersion.</p>
<p>Same example scientific applications:</p>
<ul class="simple">
<li>Design of lenses and optical systems, such as cameras, microscopes and telescopes.
Image-forming properties of a system to be modeled.</li>
<li>Simulating optical diagnostics of plasmas through forward modelling, diagnostic
design optimisation.</li>
</ul>
<p>Ray-tracing is typically very computationally expensive and is best suited for
applications that don&#8217;t require real-time calculation.</p>
</div>
<div class="section" id="key-concepts">
<h2>3.2. Key Concepts<a class="headerlink" href="#key-concepts" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rays">
<h3>3.2.1. Rays<a class="headerlink" href="#rays" title="Permalink to this headline">¶</a></h3>
<p>Represent a ray of light</p>
<ul class="simple">
<li>defines a line with an origin and direction</li>
<li>wavelength range and number of spectral samples, centre of range used for refraction calculations</li>
</ul>
<p>Ray objects must implement a tracing algorithm</p>
<ul class="simple">
<li>spectrum = ray.trace(world)</li>
<li>causes the ray to start sampling the world</li>
<li>returns a Spectrum object</li>
<li>samples of spectral radiance: W/m 2 /str/nm</li>
</ul>
</div>
<div class="section" id="observers">
<h3>3.2.2. Observers<a class="headerlink" href="#observers" title="Permalink to this headline">¶</a></h3>
<p>Represents objects that measure light, e.g. CCDs, cameras, photo diodes, eyes. Observers launch rays and accumulate
samples of the scene, which is more convenient than tracing individual rays manually.</p>
<ul class="simple">
<li>can be placed in the world and moved around</li>
<li>observe() method triggers ray-tracing, i.e camera.observe()</li>
</ul>
</div>
<div class="section" id="primitives">
<h3>3.2.3. Primitives<a class="headerlink" href="#primitives" title="Permalink to this headline">¶</a></h3>
<p>Scenes in Raysect consist of primitives, which are the basic objects making up the scene. These are objects that rays
can interact with, e.g light sources, lenses, mirrors, diffuse surfaces. Types of primitives:</p>
<ul class="simple">
<li>Mathematically defined surfaces and solids (i.e. sphere, box, cylinder, cone).</li>
<li>Constructive Solid Geometry Operators (union, intersect, subtract).</li>
<li>Tri-poly meshes optimised for millions of polygons, support instancing. Importers for STL and OBJ.</li>
</ul>
<p>Primitive surfaces and volumes can be assigned materials, e.g. glass, metal, emitter properties.</p>
</div>
<div class="section" id="scene-graph">
<h3>3.2.4. Scene-graph<a class="headerlink" href="#scene-graph" title="Permalink to this headline">¶</a></h3>
<p>Primitives and Observers are typically defined in their own local coordinate system but need to be placed into the
“world”. There needs to be a system to keep track of the locations/co-ordinate transforms of all objects in the scene.</p>
<p>The Scene-graph is a tree structure consisting of nodes, which can be both primitives and observers. Each node has an
associated coordinate space and is translated/rotated relative to it&#8217;s parent node. I.e. a car node may have four
wheel nodes as children. Operations applied to a parent are automatically propogated down to all children. The resulting
data structure describes the spatial arrangement of primitives throughout a scene.</p>
<p>The World is the root node of the scene-graph - all primitives and observers must be attached to World. When adding
nodes to the world, nodes are always parented to another node (e.g. World) and given a transform (e.g. a translation
and/or rotation) relative to their parent. Allows us to build hierarchies of objects and manipulate the whole group with
one transform.</p>
</div>
</div>
<div class="section" id="process-of-raytracing">
<h2>3.3. Process of raytracing<a class="headerlink" href="#process-of-raytracing" title="Permalink to this headline">¶</a></h2>
<p>We desire the intensity/spectrum of light reaching an observer e.g. camera pixel.
Our strategy is to sample light (radiance) along paths reaching observer and
accumulate many samples to obtain intensity. Raysect uses a “Path tracing” algorithm
where we trace a ray from the observer through all material interactions until it
reaches a light source. Finally, we propagate the resulting spectrum from the light
source back through all material/volume interactions.</p>
<p>Ray-tracing is a recursive process in nature. For example, a ray hitting a diffuse surface will
need to know about light reflected from other sources in the scene. To get this emission we
re-evaluate the ray-tracing algorithm by generating a bundle of rays at this surface.
This process can repeat many times leading to a very high level of recursion.</p>
<p>Ray-tracing is bi-directional, the algorithm can be run in both the forward and reverse
directions. In forward ray-tracing, light is traced from the light sources through material
interactions to the observer. In backward ray-tracing, light starts at the observer and ray
paths are followed through to the sources of emission. Raysect traces light in the reverse
direction because this is generally more computationally efficient. The majority of light
rays fired from a light source won&#8217;t reach the observer resulting in wasted computation.</p>
<div class="figure" id="id1">
<img alt="_images/ray-tracing_directions.png" src="_images/ray-tracing_directions.png" />
<p class="caption"><span class="caption-text"><strong>Caption:</strong> Ray-tracing algorithms are generally bi-directional and can be evaluated in both the
forward and reverse directions. ray-tracing is naturally recursive. (Image credit: Carr, M.,
Meakins, A., et. al. (2017))</span></p>
</div>
<p>During ray propogation, rays are tested for intersection with objects in the scene. Once
the nearest object has been identified, the material properties of the object are inspected
to determine the next step of the algorithm. Materials can alter the path of ray propagation
and alter the ray&#8217;s spectra through absorption and reflection curves. Some materials will
require more rays to be launched to return an accurate spectra.</p>
<div class="figure" id="id2">
<img alt="_images/calculate_emission.png" src="_images/calculate_emission.png" />
<p class="caption"><span class="caption-text"><strong>Caption:</strong> In the first stage of path tracing, a single ray path is generated. This path may be
represented by a number of smaller straight path segments that represent a ray&#8217;s interactions
with surfaces and light sources in the scene. Once the termination criteria has been met
(absorbing surface or recursion limit, etc) the emission is evaluated along the segment stack
in the forward direction. This ensures materials along the path can correctly add their emission
or absorption. To estimate a light arriving at the observer, many of these paths will be measured
and combined in a weighted average. (Image credit: Carr, M., Meakins, A., et. al. (2017))</span></p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="quickstart_guide.html" class="btn btn-neutral float-right" title="4. Quickstart Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="2. Downloading and Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2017, Dr Alex Meakins.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>